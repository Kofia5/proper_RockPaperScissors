<h2><%= @user.username %>'s Profile</h2>

<div class='container'>
<p>
  <b>Username:</b>
  <%= @user.username %>
</p>

<p>
  <b>Email:</b>
  <%= @user.email %>
</p>

<p>
  <b>Wins:</b>
  <%= link_to @user.stats.wins, list_wins_user_path(@user) %>
</p>

<p>
  <b>Losses:</b>
  <%= link_to (@user.stats.games_played - @user.stats.wins), list_losses_user_path(@user) %>
</p>

<p>
  <b>Games Played:</b>
  <%= link_to @user.stats.games_played, list_games_user_path(@user) %>
</p>

<p>
  <b>Rocks:</b>
  <%= @user.stats.rocks %> 
  ( <%= ((@user.stats.rocks / @total_throws)*100).round(3) %>% )
</p>

<p>
  <b>Papers:</b>
  <%= @user.stats.papers %> 
  ( <%= ((@user.stats.papers / @total_throws)*100).round(3) %>% )
</p>

<p>
  <b>Scissors:</b>
  <%= @user.stats.scissors %> 
  ( <%= ((@user.stats.scissors / @total_throws)*100).round(3) %>% )
</p>

<% if @current_user == @user%>
<p>
  <b>Crypted password:</b>
  <%= @user.crypted_password %>
</p>

<p>
  <b>Password salt:</b>
  <%= @user.password_salt %>
</p>

<p>
  <b>Persistence token:</b>
  <%= @user.persistence_token %>
</p>

<p>
  <b>Single access token:</b>
  <%= @user.single_access_token %>
</p>

<p>
  <b>Perishable token:</b>
  <%= @user.perishable_token %>
</p>

<p>
  <b>Login count:</b>
  <%= @user.login_count %>
</p>

<p>
  <b>Falied login count:</b>
  <%= @user.falied_login_count %>
</p>

<p>
  <b>Last request at:</b>
  <%= @user.last_request_at %>
</p>

<p>
  <b>Current login at:</b>
  <%= @user.current_login_at %>
</p>

<p>
  <b>Last login at:</b>
  <%= @user.last_login_at %>
</p>

<p>
  <b>Current login ip:</b>
  <%= @user.current_login_ip %>
</p>

<p>
  <b>Last login ip:</b>
  <%= @user.last_login_ip %>
</p>

<% end %>
</div>

<p id='rounds'>
  <h3>Last 10 rounds played</h3>

  <table id="roundsTable" class="tablesorter">
    <thead>
      <tr>
	<th>Result</th>
	<th>Opponent</th>
	<th><%= @user.username %> played</th>
	<th>Opponent played</th>
	<th>Current Score (in this game)</th>
      </tr>
    </thead>
    <tbody>
      <% @rounds.each do |round| %>
      <% curGame = Game.find(round.game_id) %>
      <% isOne = curGame.player1 == @user.stats.id %>
      <% player1 = Stats.find(curGame.player1).user %>
      <% player2 = Stats.find(curGame.player2).user %>
      <tr>
	<% if isOne %>
	<td><%= round.winner == -1 ? '_' : (round.winner == 1 ? 'Win' : 'Loss') %></td>
	<td><%= link_to player2.username, player2 %></td>
	<td><%= @throw_names[round.player1] %></td>
	<td><%= @throw_names[round.player2] %></td>
	<td><%= round.curScore1 %> - <%= round.curScore2 %></td>
	<% else %>
	<td><%= round.winner == -1 ? '_' : (round.winner == 2 ? 'Win' : 'Loss') %></td>
	<td><%= link_to player1.username, player1 %></td>
	<td><%= @throw_names[round.player2]%></td>
	<td><%= @throw_names[round.player1] %></td>
	<td><%= round.curScore2 %> - <%= round.curScore1 %></td>
	<% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
</p>
